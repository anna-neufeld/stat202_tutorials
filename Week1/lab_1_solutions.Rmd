---
title: "Lab 1: Exploring Numerical Data"
output:
  html_document:
    css: ../lab.css
    highlight: pygments
    theme: cerulean
    toc: yes
    toc_float: yes
  pdf_document:
    toc: yes
---

```{r global-options, include=FALSE}
knitr::opts_chunk$set(eval =TRUE)
library(tidyverse)
```

```{r load-data, eval = TRUE}
source("http://www.openintro.org/stat/data/nycflights.R")
```


1. **Quiz Question:** What is the observational unit in this dataset? 
<ul>
  <li>A Year</li>
  <li>An Airline</li>
  <li>A Flight</li>
  <li>A City</li>
</ul>

**Solution: A flight.**


2. **Quiz Question: ** How many flights are there in the dataset that were headed to SFO in February? 

```{r}
sfo_feb_flights <- nycflights %>%
  filter(dest == "SFO", month == 2)
sfo_feb_flights %>% summarize(n())
```

3. Consider the set of flights headed to SFO in February. Make a histogram of the distribution of the arrival delays (`arr_delay`) of these flights and describe the distribution. 

```{r}
ggplot(data=sfo_feb_flights, aes(x=arr_delay)) + geom_histogram()
```

**The distribution is skewed right. A lot of flights have delays near 0 minutes, or even negative minutes (the flight was early), but there are a few high outliers (very delayed flights).**

4. Calculate the mean and median arrival delay time of the SFO February Flights and compare the two numbers. Which is larger? Why does this make sense? 

```{r}
sfo_feb_flights %>% summarize(mean_ad = mean(arr_delay), median_ad = median(arr_delay))
```

**The mean is larger. Makes sense given the right skew desrcibed in the previous problem. The mean is pulled up by a few large outliers.**

5.  **Quiz Question:** Based only on the median, which month seems to have the longest average arrival delays? A positive value means that the arrival was delayed; a negative value means that the plane arrived early. For the quiz, you may enter the number of the month (i.e. February=2, March=3). 


```{r}
nycflights %>%
  group_by(month) %>%
  summarize(median_ad = median(arr_delay), n_flights = n()) %>%
  arrange(desc(median_ad))
```

**December has the biggest median delay. Month = 12**. 


6. <b> Quiz Question: </b> Modify the code that you wrote above to determine which carrier tends to have the most delayed arrivals based on the **mean**. To answer this question, you should
<ul>
  <li> `group_by` carrier, then </li>
  <li> `summarize` mean arrival delays.</li>
</ul>
Enter your answer as the 2-letter airline code. 

```{r}
nycflights %>%
  group_by(carrier) %>%
  summarize(mean_ad = mean(arr_delay), n_flights = n()) %>%
  arrange(desc(mean_ad))
```

**HA is the airline. **

7. **Quiz Question: ** Using `group_by` and `summarize` and `arrange`, which carrier seems to operate flights with the highest average speeds (use the mean)? Enter the two letter code. 

```{r}
nycflights <- nycflights %>% mutate(speed = distance/(air_time/60))
nycflights %>% group_by(carrier) %>% summarize(mean = mean(speed)) %>% arrange(desc(mean))
```

**HA**

1. Create a scatterplot showing the relationship between the distance of a flight and its speed. Describe the relationship between distance and speed in your own words. Here are some hints:
<ul>
 <li> Use ggplot() combined with the appropriate dataset and the command ``aes(x=distance, y=speed)`` </li>
 <li> use ``geom_point()`` because this is a scatterplot. </li> 
</ul>

```{r}
ggplot(data = nycflights, aes(x = distance, y=speed)) +
  geom_point()
```

**Flights traveling a further distance have higher speeds, on average.**

9. Consider the airline that operates flights with the highest average speeds. Why do you think that this airline operates flights with the highest speeds? Think about the relationship that you described in exercise 8, and support your explanation with concrete numbers. **Hint: which airline operates flights with the furthest average distances?**

**The table below shows that HA operates flights with the largest average distance by far (Hawaii is very far from New York). We just saw in our scatterplot that flights traveling further distances tend to have higher speeds (less speed lost due to takeoff/landing time; more time spent cruising at high altitudes). Therefore, HA has the highest average speeds because it is operating very long distance flights.**

```{r}
nycflights %>% group_by(carrier) %>% summarize(mean = mean(distance)) %>% arrange(desc(mean))
```
